<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>3D Конфигуратор лодок</title>
  <style>
    body { margin: 0; overflow: hidden; font-family: sans-serif; }
    #ui {
      position: absolute; top: 10px; left: 10px;
      background: rgba(255,255,255,0.8); padding: 10px; border-radius: 6px;
    }
    label { display: block; margin-top: 5px; }
  </style>
</head>
<body>
  <div id="ui">
    <label>Модель:
      <select id="model">
        <option value="A">Model A</option>
        <option value="B">Model B</option>
        <option value="C">Model C</option>
      </select>
    </label>
    <label>Цвет:
      <select id="color">
        <option value="white">Белый</option>
        <option value="black">Чёрный</option>
        <option value="blue">Синий</option>
      </select>
    </label>
    <label>Мотор:
      <select id="motor">
        <option value="">Без</option>
        <option value="X">Мотор X</option>
        <option value="Y">Мотор Y</option>
        <option value="Z">Мотор Z</option>
      </select>
    </label>
    <label><input type="checkbox" id="tent"> Тент</label>
    <label><input type="checkbox" id="wheel"> Правый руль</label>
    <button id="send">Отправить</button>
  </div>

  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';

    let scene = new THREE.Scene();
    scene.background = new THREE.Color(0xaec6cf);

    let camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(3, 2, 4);

    let renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    let controls = new OrbitControls(camera, renderer.domElement);

    scene.add(new THREE.HemisphereLight(0xffffff, 0x444444, 1));
    let dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(5, 10, 7);
    scene.add(dirLight);

    let boat, motorObj, tentObj, wheelObj;
    let material = new THREE.MeshStandardMaterial({ color: 'white' });

    function createBoat(model) {
      if (boat) scene.remove(boat);
      let geometry;
      if (model === 'A') geometry = new THREE.BoxGeometry(2, 0.5, 1);
      if (model === 'B') geometry = new THREE.SphereGeometry(0.8, 32, 16);
      if (model === 'C') geometry = new THREE.ConeGeometry(0.8, 1.5, 16);
      boat = new THREE.Mesh(geometry, material);
      scene.add(boat);
    }

    function updateColor(color) { material.color.set(color); }

    function updateMotor(type) {
      if (motorObj) scene.remove(motorObj);
      if (!type) return;
      let geom = new THREE.BoxGeometry(0.3, 0.3, 0.3);
      let mat = new THREE.MeshStandardMaterial({ color: 'gray' });
      motorObj = new THREE.Mesh(geom, mat);
      motorObj.position.set(0, 0, -0.8);
      scene.add(motorObj);
    }

    function updateTent(enabled) {
      if (tentObj) scene.remove(tentObj);
      if (!enabled) return;
      let geom = new THREE.BoxGeometry(1.5, 0.1, 0.8);
      let mat = new THREE.MeshStandardMaterial({ color: 'lightgray' });
      tentObj = new THREE.Mesh(geom, mat);
      tentObj.position.set(0, 0.4, 0);
      scene.add(tentObj);
    }

    function updateWheel(enabled) {
      if (wheelObj) scene.remove(wheelObj);
      if (!enabled) return;
      let geom = new THREE.BoxGeometry(0.2, 0.2, 0.2);
      let mat = new THREE.MeshStandardMaterial({ color: 'black' });
      wheelObj = new THREE.Mesh(geom, mat);
      wheelObj.position.set(0.8, 0, 0.4);
      scene.add(wheelObj);
    }

    document.getElementById('model').addEventListener('change', e => createBoat(e.target.value));
    document.getElementById('color').addEventListener('change', e => updateColor(e.target.value));
    document.getElementById('motor').addEventListener('change', e => updateMotor(e.target.value));
    document.getElementById('tent').addEventListener('change', e => updateTent(e.target.checked));
    document.getElementById('wheel').addEventListener('change', e => updateWheel(e.target.checked));

    document.getElementById('send').addEventListener('click', () => {
      let data = {
        model: document.getElementById('model').value,
        color: document.getElementById('color').value,
        motor: document.getElementById('motor').value,
        tent: document.getElementById('tent').checked,
        wheel: document.getElementById('wheel').checked
      };
      alert("Выбрано:\n" + JSON.stringify(data, null, 2));
    });

    createBoat('A');

    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
